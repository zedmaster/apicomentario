kind delete cluster --name  apicomentario
kind create cluster --name=apicomentario --config=config.yaml
helm repo add elastic https://helm.elastic.co
helm install elasticsearch elastic/elasticsearch -n elastic-system --create-namespace --set replicas=1 --set auth.enabled=true --set auth.internalUsers.kibana_system.password=kibanabana
helm install kibana elastic/kibana -n elastic-system --create-namespace --set elasticsearch.username=kibana_system --set elasticsearch.password=kibanabana
helm install filebeat elastic/filebeat -n elastic-system --create-namespace
kubectl exec -it elasticsearch-master-0 -n elastic-system -- bin/elasticsearch-users useradd kibanaadmin -p kibanabana -r kibana_user
kubectl port-forward svc/kibana-kibana -n elastic-system 5601:5601




kind delete cluster --name  apicomentario
kind create cluster --name=apicomentario --config=config.yaml


helm repo add elastic https://helm.elastic.co
helm install elasticsearch elastic/elasticsearch --set replicas=1 --set auth.roles.admin_role.privileges.cluster=ALL --set auth.roles.admin_role.privileges.index=ALL --set auth.roles.admin_role.privileges.application=ALL --set auth.users.kibanaadmin.password=kibanabana --set auth.users.kibanaadmin.roles=admin_role
helm install kibana elastic/kibana --set env.ELASTICSEARCH_USERNAME=kibanaadmin --set env.ELASTICSEARCH_PASSWORD=kibanabana --set env.ELASTICSEARCH_HOSTS=http://elasticsearch-master:9200

helm install filebeat elastic/filebeat -f elastic/filebeat-values.yaml
kubectl exec -it elasticsearch-master-0 -- bin/elasticsearch-users useradd kibanaadmin -p kibanabana -r superuser
kubectl apply -f elastic/heartbeat-deployment.yaml
kubectl port-forward svc/kibana-kibana 5601:5601





kind delete cluster --name  apicomentario
kind create cluster --name=apicomentario --config=config.yaml

helm repo add argo https://argoproj.github.io/argo-helm
helm repo update
helm install argocd argo/argo-cd
kubectl port-forward service/argocd-server -n default 8080:443
kubectl -n default get secret argocd-initial-admin-secret -o jsonpath="{.data.password}" | base64 -d
kubectl port-forward service/pyserver-service 8000:8000

helm repo add elastic https://helm.elastic.co
helm repo update
helm install elasticsearch elastic/elasticsearch --set replicas=1
helm install kibana elastic/kibana --set env.ELASTICSEARCH_USERNAME=elastic --set env.ELASTICSEARCH_PASSWORD=changeme --set env.ELASTICSEARCH_HOSTS=http://elasticsearch-master:9200
kubectl exec -it elasticsearch-master-0 -- bin/elasticsearch-users useradd kibanaadmin -p kibanabana -r superuser
kubectl port-forward svc/kibana-kibana 5601:5601

helm install filebeat elastic/filebeat -f elastic/filebeat-values.yaml
helm install metricbeat elastic/metricbeat -f elastic/metricbeat-values.yaml
helm install apm-server elastic/apm-server
kubectl apply -f elastic/heartbeat-deployment.yaml

